(()=>{var e={};e.id=105,e.ids=[105],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1184:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},1456:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},1903:(e,t,s)=>{"use strict";s.d(t,{DashboardApp:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call DashboardApp() from the server but DashboardApp is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/almeidagabriel/Documents/CANA/components/dashboard-app.tsx","DashboardApp")},2704:()=>{},2723:()=>{},2872:(e,t,s)=>{Promise.resolve().then(s.bind(s,1903))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3051:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3544:(e,t,s)=>{Promise.resolve().then(s.bind(s,9413))},3873:e=>{"use strict";e.exports=require("path")},4118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(7413),a=s(1903);async function i({searchParams:e}){let t=await e??{};return(0,r.jsx)(a.DashboardApp,{initialJobId:t.job})}},5570:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(5239),a=s(8088),i=s(8170),o=s.n(i),l=s(893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let d={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4118)),"/Users/almeidagabriel/Documents/CANA/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/Users/almeidagabriel/Documents/CANA/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/almeidagabriel/Documents/CANA/app/dashboard/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8014:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>n});var r=s(7413),a=s(659),i=s.n(a),o=s(5834),l=s.n(o);s(2704);let n={title:"ViralCut AI | Gere cortes virais de YouTube com IA",description:"Cole um link do YouTube e gere automaticamente cortes 9:16 com score de viraliza\xe7\xe3o, legenda din\xe2mica e t\xedtulos prontos para TikTok, Reels e Shorts."};function d({children:e}){return(0,r.jsx)("html",{lang:"pt-BR",children:(0,r.jsx)("body",{className:`${i().variable} ${l().variable} bg-canvas text-white antialiased`,children:e})})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9413:(e,t,s)=>{"use strict";s.d(t,{DashboardApp:()=>d});var r=s(687),a=s(5814),i=s.n(a),o=s(3210);function l(e){switch(e){case"queued":return"Na fila";case"collecting":return"Coletando dados";case"analyzing":return"IA analisando viraliza\xe7\xe3o";case"rendering":return"Renderizando 9:16";case"completed":return"Conclu\xeddo";case"failed":return"Falhou";default:return e}}function n(e){let t=Math.max(0,Math.floor(e)),s=Math.floor(t/60);return`${s}:${String(t%60).padStart(2,"0")}`}function d({initialJobId:e}){let[t,s]=(0,o.useState)([]),[a,d]=(0,o.useState)(e),[c,x]=(0,o.useState)(),[p,m]=(0,o.useState)(),[h,u]=(0,o.useState)(!0),[b,g]=(0,o.useState)(null),[f,v]=(0,o.useState)(null),[j,N]=(0,o.useState)(!1),[y,w]=(0,o.useState)({}),[P,S]=(0,o.useState)({}),k=(0,o.useCallback)(async()=>{try{let t=await fetch("/api/jobs",{cache:"no-store"});if(!t.ok)throw Error("Falha ao buscar hist\xf3rico de jobs.");let r=await t.json();s(r.jobs),d(t=>t&&r.jobs.some(e=>e.id===t)?t:e&&r.jobs.some(t=>t.id===e)?e:r.jobs[0]?.id),g(null)}catch(e){g(e instanceof Error?e.message:"Erro ao carregar dashboard.")}finally{u(!1)}},[e]),C=(0,o.useMemo)(()=>t.find(e=>e.id===a)??t[0],[t,a]),A=(0,o.useMemo)(()=>C?.clips.find(e=>e.id===c)??C?.clips[0],[C,c]);async function T(e){if(!C)return;let t=P[e];if(t){v(e);try{let s=await fetch(`/api/jobs/${C.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({clipId:e,title:t.title,transcriptSnippet:t.transcriptSnippet})});if(!s.ok){let e=await s.json();throw Error(e.error??"Falha ao salvar altera\xe7\xf5es.")}await k(),m(void 0)}catch(e){g(e instanceof Error?e.message:"Falha ao salvar corte.")}finally{v(null)}}}async function E(){if(C){N(!0),g(null);try{let e=await fetch(`/api/jobs/${C.id}/regenerate`,{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error??"Falha ao gerar mais cortes.");await k()}catch(e){g(e instanceof Error?e.message:"N\xe3o foi poss\xedvel regenerar cortes.")}finally{N(!1)}}}async function _(e){v(e.id);try{let t=await fetch("/api/seo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sourceText:e.transcriptSnippet,contextTitle:e.title})}),s=await t.json();if(!t.ok)throw Error(s.error??"Falha ao gerar SEO.");w(t=>({...t,[e.id]:{titles:s.titles,description:s.description,hashtags:s.hashtags}}))}catch(e){g(e instanceof Error?e.message:"Erro ao gerar t\xedtulos.")}finally{v(null)}}return(0,r.jsxs)("main",{className:"mx-auto flex min-h-screen w-full max-w-7xl flex-col gap-6 px-4 pb-12 pt-6 sm:px-6 lg:px-8",children:[(0,r.jsx)("header",{className:"glass grid-lights rounded-3xl p-5 md:p-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.22em] text-electric",children:"Dashboard"}),(0,r.jsx)("h1",{className:"mt-1 text-2xl font-semibold text-white md:text-3xl",children:"Painel de cortes virais"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:"Acompanhe processamento, edite legendas e exporte cortes otimizados para Shorts, Reels e TikTok."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i(),{href:"/",className:"rounded-xl border border-indigo-300/35 px-4 py-2 text-xs font-semibold text-slate-100 transition hover:border-electric",children:"Novo v\xeddeo"}),(0,r.jsx)("a",{href:"/api/auth/signin?callbackUrl=/dashboard",className:"rounded-xl border border-electric/35 bg-electric/10 px-4 py-2 text-xs font-semibold text-electric transition hover:bg-electric/20",children:"Login com Google"})]})]})}),(0,r.jsxs)("section",{className:"grid gap-5 lg:grid-cols-[320px_1fr]",children:[(0,r.jsxs)("aside",{className:"glass soft-scroll rounded-3xl p-4 lg:max-h-[calc(100vh-170px)] lg:overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-slate-200",children:"Hist\xf3rico de v\xeddeos"}),(0,r.jsx)("span",{className:"rounded-full border border-indigo-300/30 px-2 py-1 text-xs text-slate-300",children:t.length})]}),h?(0,r.jsx)("p",{className:"mt-4 text-sm text-slate-400",children:"Carregando hist\xf3rico..."}):null,h||0!==t.length?null:(0,r.jsx)("p",{className:"mt-4 rounded-xl border border-dashed border-indigo-300/20 p-4 text-sm text-slate-300",children:"Nenhum v\xeddeo processado ainda. Volte para a landing e envie um link."}),(0,r.jsx)("div",{className:"mt-4 grid gap-3",children:t.map(e=>{var t;return(0,r.jsxs)("button",{type:"button",onClick:()=>d(e.id),className:`w-full rounded-2xl border p-3 text-left transition ${C?.id===e.id?"border-electric bg-electric/10":"border-indigo-300/20 bg-slate/60 hover:border-indigo-300/45"}`,children:[(0,r.jsx)("p",{className:"line-clamp-2 text-xs font-semibold text-white",children:e.video?.title??e.input.youtubeUrl}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between text-[11px] text-slate-300",children:[(0,r.jsx)("span",{children:l(e.stage)}),(0,r.jsxs)("span",{children:[e.progress,"%"]})]}),(0,r.jsx)("p",{className:"mt-1 text-[10px] text-slate-400",children:(t=e.createdAt,new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(t)))})]},e.id)})})]}),(0,r.jsxs)("div",{className:"glass soft-scroll rounded-3xl p-4 md:p-5 lg:max-h-[calc(100vh-170px)] lg:overflow-y-auto",children:[b?(0,r.jsx)("div",{className:"mb-4 rounded-xl border border-red-400/30 bg-red-900/20 p-3 text-sm text-red-200",children:b}):null,C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"rounded-2xl border border-indigo-300/20 bg-slate/60 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-white",children:C.video?.title??"Processando v\xeddeo"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-300",children:C.video?.channelName??"Canal"})]}),(0,r.jsx)("div",{className:"rounded-full border border-indigo-300/30 px-3 py-1 text-xs text-slate-100",children:l(C.stage)})]}),(0,r.jsx)("div",{className:"mt-4 h-2 overflow-hidden rounded-full bg-slate-800",children:(0,r.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-electric to-neon transition-all",style:{width:`${C.progress}%`}})}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:E,disabled:"completed"!==C.stage||j,className:"rounded-xl border border-electric/45 px-4 py-2 text-xs font-semibold text-electric transition hover:bg-electric/15 disabled:cursor-not-allowed disabled:opacity-50",children:j?"Gerando...":"Gerar mais cortes"}),(0,r.jsxs)("span",{className:"rounded-xl border border-indigo-300/30 px-4 py-2 text-xs text-slate-300",children:[C.clips.length," cortes gerados"]})]}),(0,r.jsx)("div",{className:"mt-4 grid gap-2",children:C.logs.slice(0,4).map(e=>(0,r.jsxs)("div",{className:"rounded-xl border border-indigo-300/15 bg-slate-900/40 px-3 py-2 text-xs text-slate-300",children:[(0,r.jsx)("span",{className:"font-semibold text-electric",children:l(e.stage)})," ",e.message]},`${e.at}-${e.message}`))})]}),C.clips.length>0?(0,r.jsxs)("section",{className:"mt-5 grid gap-4 xl:grid-cols-[360px_1fr]",children:[(0,r.jsxs)("article",{className:"rounded-2xl border border-indigo-300/20 bg-slate/60 p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-slate-100",children:"Preview estilo TikTok"}),A?(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsxs)("div",{className:"relative aspect-[9/16] w-64 overflow-hidden rounded-[2.4rem] border border-indigo-300/30 bg-black p-2 shadow-glow",children:[(0,r.jsx)("video",{src:A.previewUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"h-full w-full rounded-[2rem] object-cover"},A.id),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-x-3 bottom-4 rounded-xl bg-black/45 p-2 text-[11px] font-semibold leading-snug text-white",children:A.subtitles.slice(0,10).map(e=>`${e.text}${e.emoji?` ${e.emoji}`:""}`).join(" ")}),(0,r.jsx)("div",{className:"absolute left-3 right-3 top-4 rounded-lg bg-black/45 px-2 py-1 text-center text-[10px] font-semibold text-white",children:A.title})]})}):(0,r.jsx)("p",{className:"mt-4 text-xs text-slate-300",children:"Selecione um corte para visualizar."})]}),(0,r.jsxs)("article",{className:"rounded-2xl border border-indigo-300/20 bg-slate/60 p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-slate-100",children:"Cortes gerados"}),(0,r.jsx)("div",{className:"mt-3 grid gap-3",children:C.clips.map(e=>{let t=P[e.id]??{title:e.title,transcriptSnippet:e.transcriptSnippet},s=y[e.id];return(0,r.jsxs)("div",{className:`rounded-2xl border p-3 ${A?.id===e.id?"border-electric bg-electric/10":"border-indigo-300/20 bg-slate-900/35"}`,children:[(0,r.jsxs)("button",{type:"button",onClick:()=>x(e.id),className:"w-full text-left",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.title}),(0,r.jsxs)("span",{className:"rounded-full border border-indigo-300/35 px-2 py-1 text-[11px] text-slate-200",children:["Score ",e.score]})]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-slate-300",children:[n(e.startSec)," - ",n(e.endSec)," | ",e.durationSec,"s"]})]}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,r.jsx)("a",{href:e.downloadUrl,download:!0,className:"rounded-lg border border-indigo-300/35 px-3 py-1.5 text-xs font-semibold text-slate-100 transition hover:border-electric",children:"Download"}),(0,r.jsx)("button",{type:"button",onClick:()=>m(p===e.id?void 0:e.id),className:"rounded-lg border border-indigo-300/35 px-3 py-1.5 text-xs font-semibold text-slate-100 transition hover:border-electric",children:"Editar corte"}),(0,r.jsx)("button",{type:"button",onClick:()=>_(e),disabled:f===e.id,className:"rounded-lg border border-electric/45 px-3 py-1.5 text-xs font-semibold text-electric transition hover:bg-electric/15 disabled:opacity-55",children:"Gerar t\xedtulos virais"})]}),p===e.id?(0,r.jsxs)("div",{className:"mt-3 grid gap-2 rounded-xl border border-indigo-300/20 bg-slate-950/40 p-3",children:[(0,r.jsx)("input",{value:t.title,onChange:s=>S(r=>({...r,[e.id]:{...t,title:s.target.value}})),className:"rounded-lg border border-indigo-300/30 bg-slate/70 px-3 py-2 text-xs text-white outline-none focus:border-electric"}),(0,r.jsx)("textarea",{value:t.transcriptSnippet,onChange:s=>S(r=>({...r,[e.id]:{...t,transcriptSnippet:s.target.value}})),rows:3,className:"rounded-lg border border-indigo-300/30 bg-slate/70 px-3 py-2 text-xs text-white outline-none focus:border-electric"}),(0,r.jsx)("button",{type:"button",onClick:()=>T(e.id),disabled:f===e.id,className:"rounded-lg bg-gradient-to-r from-electric to-neon px-3 py-2 text-xs font-semibold text-slate-950 disabled:opacity-60",children:f===e.id?"Salvando...":"Salvar edi\xe7\xe3o"})]}):null,s?(0,r.jsxs)("div",{className:"mt-3 rounded-xl border border-electric/25 bg-electric/10 p-3 text-xs text-slate-100",children:[(0,r.jsx)("p",{className:"font-semibold text-electric",children:"T\xedtulos sugeridos"}),(0,r.jsx)("div",{className:"mt-1 grid gap-1",children:s.titles.slice(0,3).map(e=>(0,r.jsxs)("p",{children:["â€¢ ",e]},e))}),(0,r.jsx)("p",{className:"mt-2 font-semibold text-electric",children:"Descri\xe7\xe3o + hashtags"}),(0,r.jsx)("p",{className:"mt-1 whitespace-pre-wrap text-slate-200",children:s.description})]}):null]},e.id)})})]})]}):(0,r.jsx)("section",{className:"mt-5 rounded-2xl border border-dashed border-indigo-300/20 bg-slate/45 p-5 text-sm text-slate-300",children:"failed"===C.stage?C.error??"Processamento falhou.":"A IA ainda est\xe1 processando este v\xeddeo. Os cortes aparecer\xe3o aqui automaticamente."})]}):(0,r.jsx)("div",{className:"rounded-2xl border border-indigo-300/20 bg-slate/50 p-6 text-sm text-slate-300",children:"Selecione um job para visualizar os cortes."})]})]})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,992,814],()=>s(5570));module.exports=r})();